/*!
* Mui Player Desktop Plugin Javascript Library v1.6.0 @Professional edition
* Date：2023-01-23
* Released under GPL-3.0 license
* https://muiplayer.js.org/
*/
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,r=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){r=!0,i=e},f:function(){try{l||null==o.return||o.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayerDesktopPlugin=t()}(window,function(){return function(y){function u(){return{defaults:[{functions:"循环播放",name:"loopPlay",show:!0,model:"switch",selected:!1,onToggle:function(e,t,o){t(),e.event.currentTarget.querySelector(".toogle-switch").classList.contains("open")?b.$el.videoObject.loop=!0:b.$el.videoObject.loop=!1}},{functions:"播放速度",name:"playbackRate",show:!0,model:"select",childConfig:[{functions:"0.25"},{functions:"0.5"},{functions:"0.75"},{functions:"正常",selected:!0},{functions:"1.25"},{functions:"1.5"},{functions:"1.75"},{functions:"2"}],onToggle:function(e,t,o){t(),o();o=b.$method.getLangObject(),e=e.functions;isNaN(parseFloat(e))?(b.$el.videoObject.playbackRate=1,r.rst(o.dsps)):(b.$el.videoObject.playbackRate=parseFloat(e),r.rst(o.tsps.replace("?",e)))}}],subtitle:{functions:"字幕",name:"subtitle",childConfig:[{functions:"打开",name:"loopPlay",model:"switch",selected:!0},{functions:"选择语言",childConfig:[],onToggle:function(o,n,e){var i=o.getPanelOption(o.panelIndex,"parent").panelIndex,l=b.$el.videoObject.textTracks;l&&l instanceof TextTrackList?function(){for(var e=0;e<l.length;e++){var t=l[e];o.functions==t.label?(t.mode="showing",o.getPanelOption(i,"parent").childConfig[0].selected=!0,n()):"showing"==t.mode&&(t.mode="hidden")}}():r.rst("the textTracks api is not supported by the browser.")}}],onToggle:function(a,s,e){var c=a.event.currentTarget.querySelector(".toogle-switch").classList.contains("open"),u=b.$el.videoObject.textTracks;u&&u instanceof TextTrackList?function(){if(c)for(var e=0;e<u.length;e++){var t=u[e];"showing"==t.mode&&(t.mode="hidden")}else for(var o=a.getPanelOption(a.panelIndex,"parent").childConfig[1].childConfig,e=0;e<u.length;e++){var n,i=u[e],l=_createForOfIteratorHelper(o);try{for(l.s();!(n=l.n()).done;){var r=n.value;if(i.label==r.functions&&1==r.selected){i.mode="showing";break}}}catch(e){l.e(e)}finally{l.f()}}s()}():r.rst("the textTracks api is not supported by the browser.")}}}}function a(e){"statics"==e&&(p=(new u).defaults,f.initSubtitleOption()&&p.push(f.initSubtitleOption())),!p.map(function(e){return e.name}).includes("subtitle")&&"statics"!=e&&f.initSubtitleOption()&&p.push(f.initSubtitleOption());var t,o=b.$method.getLangObject();for(t in p){var n=p[t].name;"loopPlay"!=n?"playbackRate"!=n?"subtitle"!=n||(p[t].functions=o.subtitles,p[t].childConfig[0].functions=o.open,p[t].childConfig[1].functions=o.selectLangage):(p[t].functions=o.playbackSpeed,p[t].childConfig[3].functions=o.normal):p[t].functions=o.loopPlay}var i=_toConsumableArray(y.customSetting||[]);if(i instanceof Array){for(var l=0;l<i.length;l++){var r=p.map(function(e){return e.name});-1!=r.indexOf(i[l].name)&&p.splice(r.indexOf(i[l].name),1)}(function e(){for(var t=0;t<i.length;t++)!1===i[t].show&&(i.splice(t,1),e())})()}var a=(e=b.option).loop,s=e.live;if(1==a||!0===s)for(var c in p)if("loopPlay"==p[c].name){1==a&&(p[0].selected=!0),!0===s&&p.splice(0,p.length);break}(e=[].concat(_toConsumableArray(p),_toConsumableArray(i))).sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),d.settingConfigs=e,function e(t,o){for(var n=0;n<t.length;n++)t[n].panelIndex=null==o?n.toString():o.toString()+"-"+n,t[n].childConfig instanceof Array&&0<t[n].childConfig.length&&e(t[n].childConfig,t[n].panelIndex)}(d.settingConfigs)}var t=this,e=(y=y||{}).key,o=void 0===e?"":e,v="number"==typeof y.fullScaling&&1<y.fullScaling?y.fullScaling:1.2,b={},m=new function(){return{disabledMousemoveEvent:!1,popupNodeInfo:{triggerButtonRect:{},popupRect:{}}}},d={name:"",settingConfigs:null},p=[],r={rst:function(e){b.$method[b.$method.dc("03702W03303B02C03302P037038")](e)}},c={ctxmenuWrapper:function(){return b.$el.mPlayer.querySelector("#ctxmenu-wrapper")},hideShortcutPanel:function(){var e=b.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="none")},hideCtxmenuList:function(e){(e=e||{}).stopPropagation&&e.stopPropagation();var t=c.ctxmenuWrapper().querySelector(".ctxmenulist");t.style.opacity=0,b._this._global_.ctxmenuTimer_1=setTimeout(function(){t.style.display="none"},100)},onCtxmenuFocus:function(e){b._this._global_.ctxmenuTimer_1&&clearTimeout(b._this._global_.ctxmenuTimer_1),b._this._global_.ctxmenuTimer_2&&clearTimeout(b._this._global_.ctxmenuTimer_2),c.ctxmenuWrapper().style.display="block",c.hideShortcutPanel()},onCtxmenuBlur:function(e){(e=e||{}).stopPropagation&&e.stopPropagation(),c.hideCtxmenuList(),b._this._global_.ctxmenuTimer_2=setTimeout(function(){c.ctxmenuWrapper().style.display="none",c.ctxmenuWrapper().removeChild(e.target)},300)},disCtx:function(o,e){for(var t=0;t<o.length;t++){var n=e.map(function(e){return e.name}).indexOf(o[t].name);-1!=n&&e.splice(n,1)}(function e(){for(var t=0;t<o.length;t++)!1!==o[t].show&&o[t].name&&o[t].context||(o.splice(t,1),e())})()},getCtxmenu:function(){var e=new this.dcm,t=[];(t=_toConsumableArray(y.contextmenu||[]))instanceof Array&&this.disCtx(t,e);var o,e=[].concat(_toConsumableArray(t),_toConsumableArray(e)),n=b.$method.getLangObject(),i=_createForOfIteratorHelper(e);try{for(i.s();!(o=i.n()).done;){var l=o.value;if("shortcuts"==l.name){l.context=n.shortcuts;break}}}catch(e){i.e(e)}finally{i.f()}return e.sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),e},createCtxmenu:function(e){var t=c.getCtxmenu();if(2==e.button&&0!=t.length&&!b.$el.mPlayer.hasAttribute("miniplayer")){var o=document.createElement("ul");o.setAttribute("class","ctxmenulist"),o.setAttribute("tabindex","0"),o.addEventListener("blur",c.onCtxmenuBlur),c.onCtxmenuFocus();for(var n=t.map(function(e){return e.name}),i=0;i<t.length;i++){var l=document.createElement("li");l.innerText=t[i].context,l.setAttribute("name",t[i].name),l.addEventListener("dblclick",function(e){e.stopPropagation()}),l.addEventListener("mousemove",function(e){e.stopPropagation()}),l.addEventListener("click",function(e){e.stopPropagation();e=n.indexOf(e.currentTarget.getAttribute("name"));t[e].click instanceof Function&&t[e].click(function(){b.$el.mPlayer.focus()})}),o.appendChild(l)}b.$method.removeNode(c.ctxmenuWrapper(),".ctxmenulist"),c.ctxmenuWrapper().appendChild(o),S.setElScale(o,{fontSize:14});var r=b.$el.mPlayer.getBoundingClientRect(),a=o.getBoundingClientRect(),s=e.clientX-r.left+a.width>r.width?r.width-a.width:e.clientX-r.left,r=e.clientY-r.top+a.height>r.height?r.height-a.height:e.clientY-r.top;o.style.top=r+"px",o.style.left=s+"px",o.focus(),setTimeout(function(){o.style.opacity=1},100)}},dcm:function(){var e=b.$method.dc;return[{name:e("03702W03303603802R039038037"),context:e("IY3JNBTGU"),click:function(){var e=b.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="block"),b.$el.mPlayer.focus()}},{name:e("03103902X03403002P03D02T036"),context:e("02503902X02803002P03D02T036"),click:function(){window.open(e("02W03803803403701M01B01B02V02X03802W03902Q01A02R03303101B03103902X03403002P03D02T03601B02W02T03003003301903103902X03403002P03D02T036"))}}]},onContextmenuEvent:function(e){e.preventDefault()}},s={togglePictureIcon:function(){return document.pictureInPictureElement?'<svg class="off-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="m19,7l-14,0l0,10l14,0l0,-10zm4,12l0,-14.02c0,-1.1 -0.9,-1.98 -2,-1.98l-18,0c-1.1,0 -2,0.88 -2,1.98l0,14.02c0,1.1 0.9,2 2,2l18,0c1.1,0 2,-0.9 2,-2zm-2,0.02l-18,0l0,-14.05l18,0l0,14.05z"/><path fill="none"d="m0,0l24,0l0,24l-24,0l0,-24z"/></svg>':'<svg class="on-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"/><path fill="none"d="M0 0h24v24H0V0z"/></svg>'},monitorPictureChange:function(){var t;b._this._global_.webpagePlugin.addMonitorPictureEvent||(b._this._global_.webpagePlugin.addMonitorPictureEvent=!0,t=function(){b.$el.mplayerFooter.querySelector("#picture-in-picture").innerHTML=s.togglePictureIcon()},b.$el.videoObject.addEventListener("enterpictureinpicture",function(e){b._this.emit("pip-change",{pip:!0}),t(),b.$data.isFullScreen&&b.$method.closeFullScreen(),b.$method.setTooltipText(b.$el.mplayerFooter.querySelector("#picture-in-picture"),b.$method.getLangObject().exitPictureInPicture)}),b.$el.videoObject.addEventListener("leavepictureinpicture",function(e){b._this.emit("pip-change",{pip:!1}),t(),b.$method.setTooltipText(b.$el.mplayerFooter.querySelector("#picture-in-picture"),b.$method.getLangObject().pictureInPicture)}))},onPictureInPicture:function(e){e.currentTarget.querySelector("svg").classList.contains("on-picture")?b.$el.videoObject!=document.pictureInPictureElement&&b.$el.videoObject.requestPictureInPicture():document.exitPictureInPicture(),s.monitorPictureChange()}},g={volumeContainer:null,el:null,$el:function(){return{volumeSize:g.volumeContainer.querySelector(".volume-size"),volumeCapacity:g.volumeContainer.querySelector(".volume-capacity"),volumeDragBall:g.volumeContainer.querySelector(".volume-drag-ball"),progressBar:g.volumeContainer.querySelector(".progress-bar")}},data:null,$data:function(){return{startY:null,moveY:null,_defaultVolumeSize:null,_capacityRect:{},_dragBallRect:{}}},toggleVolumeControl:function(e){var t;e=!0===g.getStorageVolume().muted?0:e,g.data&&(t=g.data._capacityRect.height*(e/100)-g.data._dragBallRect.height,g.el.volumeDragBall.style.bottom=(0<t?t:0)+"px",g.el.progressBar.style.height=e+"%",g.el.volumeSize.innerText=e+"%"),b.$el.mplayerFooter.querySelector("#volume-switch").innerHTML=g.toggleVolumeIcon()},setVolume:function(e,t){t=Number.parseFloat(g.data._defaultVolumeSize||0)+(null==t?100:t);return 100<=t?t=100:t<=0&&(t=0),t=Number.parseInt(t),e instanceof Object&&"number"==typeof e.volume&&(t=e.volume),g.setStorageVolume(t),b.$el.videoObject.volume=t/100,g.toggleVolumeControl(t),t},computeProgress:function(e,t){t(e/g.el.volumeCapacity.getBoundingClientRect().height*100)},keyEventHandle:function(e){var t=b.$method.getKeyCode(e);-1!=new Array(13,38,40).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),13!=t?38!=t?40==t&&n.bottomKeyDown():n.topKeyDown():g.onClickEvent({currentTarget:b.$el.mplayerFooter.querySelector("#volume-switch")},!0)},mouseEventHandle:function(t){switch(t.type){case"mousedown":!function(){g.data.startY=t.clientY;var e=g.el.volumeCapacity.getBoundingClientRect().bottom-t.clientY;g.computeProgress(e,function(e){b.$el.videoObject.muted&&(b.$el.videoObject.muted=!1);e=g.setVolume(!1,e);b._this._global_.webpagePlugin.startDownVolumeSize=e,g.data._defaultVolumeSize=g.el.progressBar.style.height.substr(0,g.el.progressBar.style.height.length-1)||0}),g.el.volumeDragBall.style.boxShadow="0 0 20px 3px "+b.$habit.themeColor,f.focusToggle("OFF"),g.volumeContainer.addEventListener("mousemove",g.mouseEventHandle),g.volumeContainer.addEventListener("mouseup",g.mouseEventHandle)}();break;case"mousemove":!function(){g.data.moveY=t.clientY,g.data.startY||(g.data.startY=t.clientY);var e=g.data.startY-g.data.moveY;g.computeProgress(e,function(e){e=g.setVolume(!1,e);b._this._global_.webpagePlugin.endDownVolumeSize=e})}();break;case"mouseup":g.data._defaultVolumeSize=0,g.el.volumeDragBall.style.boxShadow="none",g.volumeContainer.removeEventListener("mousemove",g.mouseEventHandle),g.volumeContainer.removeEventListener("mouseup",g.mouseEventHandle)}},getStorageVolume:function(){var e={};try{e=JSON.parse(window.localStorage.getItem("mp-player-volume"))||{}}catch(e){}return e},setStorageVolume:function(e,t){var o=g.getStorageVolume(),n=null!=t?o.volume||100:e,o=null!=t?t:b.$el.videoObject instanceof Element&&b.$el.videoObject.muted,e=(new Date).setMonth((new Date).getMonth()+1),t=(new Date).getTime();window.localStorage.setItem("mp-player-volume",JSON.stringify({volume:n,muted:o,expiration:e,creation:t}))},toggleVolumeIcon:function(){var e='<svg class="volume-full"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',t='<svg fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',o='<svg class="volume-close"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',n=g.getStorageVolume();return n.expiration<=(new Date).getTime()?e:!0===n.muted||0==n.volume?o:n.volume<50?t:e},createVolumePopup:function(){var e=(new S.popupInstance).createPopupElement();return e.setAttribute("popup-name","volume"),e.innerHTML='<div class="volume-container keyboard-input"id="volume-container"tabindex="0"><div class="volume-size">0%</div><div class="volume-capacity"><div class="volume-drag-ball"></div><div class="progress-bar"></div></div></div>',e.querySelector(".progress-bar").style.backgroundColor=b.$habit.themeColor,g.volumeContainer=e.querySelector("#volume-container"),g.el=new g.$el,g.data=new g.$data,g.volumeContainer.addEventListener("mousedown",g.mouseEventHandle),g.volumeContainer.addEventListener("keydown",g.keyEventHandle),g.volumeContainer.addEventListener("blur",function(){(new S.popupInstance).togglePopupVisible("OFF")}),e},showVolumePopup:function(e){var t;e=e||{},b.$data.isTouchMove||((t=b.$el.mPlayer.querySelector(".mp-popup"))||(t=g.createVolumePopup(),"keydown"==e.type&&setTimeout(function(){t.querySelector("#volume-container").focus()},100),b.$el.mplayerFooter.insertBefore(t,b.$el.mplayerFooter.childNodes[0]),b.$data.isFullScreen&&(S.setElScale(t,["width","height"]),S.setElScale(t.querySelector(".volume-capacity"),["width","height"]),S.setElScale(t.querySelector(".volume-drag-ball"),["width","height"]),S.setElScale(t.querySelector(".volume-container"),["fontSize"])),g.data._capacityRect=g.el.volumeCapacity.getBoundingClientRect(),g.data._dragBallRect=g.el.volumeDragBall.getBoundingClientRect(),e=g.getStorageVolume(),g.setVolume(e),(new S.popupInstance).setVisiblePopup(t,b.$el.mplayerFooter.querySelector("#volume-switch"))))},onClickEvent:function(e,t){var o,n;!1!==e.currentTarget.exist&&(e.currentTarget.querySelector("svg").classList.contains("volume-close")?(g.setStorageVolume(null,!1),o=g.getStorageVolume().volume||100,n=b._this._global_.webpagePlugin.endDownVolumeSize,e=b._this._global_.webpagePlugin.startDownVolumeSize,g.toggleVolumeControl(0==n?e:n||o),b.$el.videoObject.muted=!1):(g.setStorageVolume(null,!0),g.toggleVolumeControl(0),b.$el.videoObject.muted=!0),!0===t&&(b.$method.createTimerCloseControl(),S.showHandleIcon("volume-icon")))}},f={currentFocusPanelId:"",isFocusActive:!1,backPanel:function(e){var t=f.getPanelOption(e,"parent");f.showPanel(t,"previous",e)},selected:function(e){for(var t=b.$el.mPlayer.querySelector(".mp-popup"),o=t.querySelectorAll(".mp-panel-selected"),n=0;n<o.length;n++)o[n].classList.remove("mp-panel-selected");t.querySelector('[panel-index="'+e+'"]').classList.add("mp-panel-selected");for(var i=f.getPanelOption(e,"parent").childConfig||[],n=0;n<i.length;n++)i[n].panelIndex==e?i[n].selected=!0:i[n].selected&&"switch"!=i[n].model&&(i[n].selected=!1)},switched:function(e){var t=f.getPanelOption(e);t.selected=!t.selected;e=b.$el.mPlayer.querySelector('.mp-popup [panel-index="'+e+'"] .toogle-switch');e.classList.remove(t.selected?"close":"open"),e.classList.add(t.selected?"open":"close")},triggerSelected:function(t,e){var o,n;e.stopPropagation(),t&&(t.childConfig instanceof Array&&0<t.childConfig.length?f.showPanel(t):"switch"!=t.model&&!0===t.selected||(n=null,(n=(o=f.getPanelOption(t.panelIndex,"parent"))instanceof Array?t:o).onToggle instanceof Function&&n.onToggle({functions:t.functions,panelIndex:t.panelIndex,getPanelOption:f.getPanelOption,event:e},function(e){"switch"==t.model?f.switched(t.panelIndex):f.selected(t.panelIndex),e instanceof Function&&e()},function(e){o instanceof Object&&o.childConfig instanceof Array&&0<o.childConfig.length?setTimeout(function(){f.backPanel(o.panelIndex)},"number"==typeof e?e:100):console.warn("no subpanel configuration options are available")})))},setScalePopup:function(e){if(b.$data.isFullScreen&&e instanceof Element){S.setElScale(e,["width","height",e.classList.contains("mp-popup")?"fontSize":""]),S.setElScale(e.querySelector(".toogle-switch"),["width","height"]),S.setElScale(e.querySelector(".toogle-switch .ball"),["width","height"]);for(var t=e.querySelectorAll(".mp-menuitem"),o=0;o<t.length;o++)S.setElScale(t[o],["height","lineHeight"])}},isNextReady:!0,showPanel:function(e,o,t){var n,s,c,u,i,d,l,r,a;f.isNextReady&&(n=f.createSettingPopup(e),s=b.$el.mPlayer.querySelector(".mp-popup"),c=s.querySelector(".mp-panel-item"),s.appendChild(n.childNodes[0]),e=e instanceof Array?"homeSetting":e.functions,(u=s.querySelector('[panel-name="'+e+'"]')).classList.add("mp-panel-item"),f.setScalePopup(u),i=s.getBoundingClientRect(),d=c.getBoundingClientRect(),l=u.getBoundingClientRect(),e=(e=b.$el.mPlayer.getBoundingClientRect()).height-(e.height-l.bottom)-(e.top+10),r=l.height>=e?e:l.height,u.style.width=l.width+"px",u.style.height=r+"px",u.style.right=("previous"==o?d.width:-l.width)+"px",e=u.querySelector(".mp-panel-menu .mp-panel-selected"),t=u.querySelector('[panel-index="'+t+'"]'),a=e||t||u.querySelector("[panel-index]"),setTimeout(function(){a.focus()},250),setTimeout(function(){for(var e=s.querySelectorAll(".mp-panel"),t=0;t<e.length;t++)e[t].classList.contains("mp-popup-animation")||e[t].classList.add("mp-popup-animation");s.classList.contains("mp-popup-animation")||s.classList.add("mp-popup-animation"),c.style.opacity=0,c.style.right=("previous"==o?-d.width:l.width)+"px",i.width!=l.width&&(s.style.width=l.width+"px"),i.height!=r&&(s.style.height=r+"px"),u.style.right="0px",f.currentFocusPanelId=""},30),f.isNextReady=!1,setTimeout(function(){var e=s.getBoundingClientRect(),t=e.bottom,o=e.height,n=e.left,i=e.right,l=e.top,r=e.width,a=e.x,e=e.y;m.popupNodeInfo.popupRect={bottom:t,height:o,left:n,right:i,top:l,width:r,x:a,y:e},d.top<u.getBoundingClientRect().top&&(m.popupNodeInfo.popupRect.top=d.top,m.popupNodeInfo.popupRect.height=d.height),f.isNextReady=!0,s.removeChild(c)},250))},getPanelOption:function(l,r){var a=!1,s=null;return function e(t,o){for(var n=0;n<t.length&&!a;n++){var i=t[n];i.panelIndex==l?(a=!0,s="parent"==r?o:i):i.childConfig instanceof Array&&0<i.childConfig.length&&e(i.childConfig,i)}}(d[d.name],d[d.name]),s},setCurrentModelEl:function(e){var t=e.childConfig,o=e.model||"select",n="";if("select"==o&&t instanceof Array&&0<t.length){for(var i=0;i<t.length;i++)if(!0===t[i].selected){n=t[i].functions||"";break}}else"switch"==o&&(n='<div class="toogle-switch '+(e.selected?"open":"close")+'" id="toggle-fit" style="background: '+b.$habit.themeColor+';"><div class="ball"></div></div>');return n},createSettingPopup:function(t){var e=(new S.popupInstance).createPopupElement();e.setAttribute("popup-name","setting"),t instanceof Array?e.innerHTML='<div class="mp-panel" panel-name="homeSetting"><div class="mp-panel-menu"></div></div>':(e.innerHTML='<div class="mp-panel mp-panel-child" panel-name="'+t.functions+'"><div class="mp-panel-menu"><ul class="mp-menuitem mp-panel-header"><li class="title"><div class="mp-menuitem-content left-arrow-icon">'+t.functions+"</div></li><li></li></ul></div></div>",e.querySelector(".mp-panel-header .title").addEventListener("click",function(e){e.stopPropagation(),f.isFocusActive=!0,f.backPanel(t.panelIndex)}));for(var o=t instanceof Array?t:t.childConfig,n=0;n<o.length;n++){var i,l,r,a=o[n]||{},s=a.model||"select";a.functions&&"string"==typeof a.functions&&((i=document.createElement("ul")).setAttribute("class","mp-menuitem"),i.setAttribute("panel-index",a.panelIndex),i.setAttribute("tabindex","0"),!0!==a.selected||"select"!=s||t instanceof Array||i.classList.add("mp-panel-selected"),(l=document.createElement("li")).innerHTML=a.functions,r=document.createElement("li"),(s=document.createElement("div")).setAttribute("class","mp-menuitem-content"),a.childConfig instanceof Array&&0<a.childConfig.length&&s.classList.add("arrow-icon"),"switch"==a.model&&s.classList.add("switch-icon"),s.innerHTML=f.setCurrentModelEl(a),r.appendChild(s),i.appendChild(l),i.appendChild(r),i.addEventListener("click",function(e){var t=f.getPanelOption(e.currentTarget.getAttribute("panel-index"));f.triggerSelected(t,e)}),i.addEventListener("mousedown",function(){f.focusToggle("OFF")}),i.addEventListener("blur",function(e){f.isFocusActive=!1,f.currentFocusPanelId=""}),i.addEventListener("focus",function(e){f.isFocusActive=!0,f.currentFocusPanelId=e.currentTarget.getAttribute("panel-index")}),i.addEventListener("keydown",function(e){f.settingOnKeyDownAction(e)}),e.querySelector(".mp-panel-menu").appendChild(i))}return e},showSettingPopup:function(e,t){if(e=e||{},!b.$data.isTouchMove){var o=b.$el.mPlayer.querySelector(".mp-popup");if(!o){a(),o=f.createSettingPopup(d[d.name]),setTimeout(function(){o.querySelector("[panel-index]").focus()},100),b.$el.mplayerFooter.insertBefore(o,b.$el.mplayerFooter.childNodes[0]),f.setScalePopup(o),(new S.popupInstance).setVisiblePopup(o,e.currentTarget,t);for(var n=o.getBoundingClientRect(),t=b.$el.mPlayer.getBoundingClientRect(),t=t.height-(t.height-n.bottom)-(t.top+10),i=n.height>=t?t:n.height,l=o.querySelectorAll(".mp-popup .mp-panel,.mp-popup .mp-panel-menu"),r=0;r<l.length;r++)l[r].style.width=n.width+"px",l[r].style.height=i+"px";o.style.width=n.width+"px",o.style.height=i+"px",o.querySelector(".mp-panel").classList.add("mp-panel-item")}}},focusToggle:function(e){var t=b.$el.mPlayer;"ON"==e?t.classList.contains("mp-keyboard-focus")||t.classList.add("mp-keyboard-focus"):t.classList.contains("mp-keyboard-focus")&&t.classList.remove("mp-keyboard-focus")},settingOnKeyDownAction:function(e){var t=b.$el.mPlayer.querySelector(".mp-popup"),o=b.$method.getKeyCode(e);if(f.focusToggle("ON"),-1!=new Array(13,32,37,38,39,40).indexOf(o)&&(e.stopPropagation(),e.preventDefault()),32!=o&&13!=o)if(37!=o)if(38!=o)if(39!=o){if(40==o){i=[];i=(n=f.getPanelOption(f.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(r=0;r<i.length;r++)if(i[r].panelIndex==f.currentFocusPanelId){r!=i.length-1?(l=i[r+1].panelIndex,t.querySelector('[panel-index="'+l+'"]').focus()):t.querySelector('[panel-index="'+i[0].panelIndex+'"]').focus();break}}}else(n=f.getPanelOption(f.currentFocusPanelId,"current"))&&n.childConfig instanceof Array&&0<n.childConfig.length&&f.showPanel(n,"next");else{var n,i=[];i=(n=f.getPanelOption(f.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(var l,r=0;r<i.length;r++)if(i[r].panelIndex==f.currentFocusPanelId){0==r?t.querySelector('[panel-index="'+i[i.length-1].panelIndex+'"]').focus():(l=i[r-1].panelIndex,t.querySelector('[panel-index="'+l+'"]').focus());break}}else{var a=t.querySelector(".mp-panel-header .title");a&&a.click()}else{a=f.getPanelOption(f.currentFocusPanelId);f.triggerSelected(a,e)}},onSettingKeyDown:function(e,t){e.preventDefault(),b.$el.mplayerFooter.querySelector(".mp-popup").querySelector("[panel-index]").focus(),f.focusToggle("ON"),f.settingOnKeyDownAction(e)},initSubtitleOption:function(){var e=b.$el.videoObject?b.$el.videoObject.textTracks:"";if(e&&e instanceof TextTrackList&&0<e.length){var t=(new u).subtitle;t.childConfig[1].childConfig.splice(0,t.childConfig[1].childConfig.length);for(var o=0;o<e.length;o++){var n=e[o];t.childConfig[1].childConfig.push({functions:n.label,selected:"showing"==n.mode})}return t}}},n={toggleVisible:function(e,t){if(!0===e&&b.$data.showScreenControls)return b.$method.createTimerCloseControl(),void(b._this._global_.webpagePlugin.hiddleControl||t instanceof Function&&t());!0!==e||b.$data.showScreenControls||(b.$method.toggleControlsDisplay({type:"showControls"}),b._this._global_.webpagePlugin.hiddleControl=!0,setTimeout(function(){b._this._global_.webpagePlugin.hiddleControl=!1,t instanceof Function&&t()},300))},escKeyDown:function(){(new S.popupInstance).togglePopupVisible("OFF"),f.focusToggle("OFF"),b.$el.mPlayer.focus()},confirmKeyDown:function(e){(new t.interface)._onAgentMpTap("click"),n.escKeyDown()},leftKeyDown:function(){var e;!0!==b.option.live&&(n.toggleVisible(!0),e=b.$el.videoObject.currentTime-5,b.$data.currentTime=0<e?e:.1,b.$el.videoObject.currentTime=b.$data.currentTime,S.showHandleIcon("progress-back"),(new S.popupInstance).togglePopupVisible("OFF"))},rightKeyDown:function(){var e,t;!0!==b.option.live&&(n.toggleVisible(!0),e=b.$data,(t=b.$el.videoObject.currentTime+5)<=e.duration?b.$data.currentTime=t:b.$data.currentTime=Number.parseInt(e.duration),b.$el.videoObject.currentTime=b.$data.currentTime,S.showHandleIcon("progress-forward"),(new S.popupInstance).togglePopupVisible("OFF"))},topKeyDown:function(){!1!==b.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=g.getStorageVolume(),t=e.volume;!0===e.muted?(b.$el.videoObject.muted=!1,t=5):t+=5,g.showVolumePopup(),g.setVolume(!1,t)}),S.showHandleIcon("volume-icon"))},bottomKeyDown:function(){!1!==b.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=g.getStorageVolume(),t=e.volume;!0===e.muted?(b.$el.videoObject.muted=!1,t=5):t-=5,g.showVolumePopup(),g.setVolume(!1,t)}),S.showHandleIcon("volume-icon"))},onDocKeydown:function(e){var t=b.$method.getKeyCode(e);-1!=new Array(37,38,39,40,32,13).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),70!=t?77!=t?27!=t?32!=t&&75!=t?37!=t?38!=t?39!=t?40==t&&n.bottomKeyDown():n.rightKeyDown():n.topKeyDown():n.leftKeyDown():n.confirmKeyDown(e):n.escKeyDown():g.onClickEvent({currentTarget:b.$el.mplayerFooter.querySelector("#volume-switch")},!0):(e=b.$el.mplayerFooter.querySelector("#full-switch"))instanceof Element&&e.click()}},w={_createSettingPopup:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,n=t.configs,t=t.offseDistance;d.name=o,d[o]=n,function e(t,o){for(var n=0;n<t.length;n++)t[n].panelIndex=null==o?n.toString():o.toString()+"-"+n,t[n].childConfig instanceof Array&&0<t[n].childConfig.length&&e(t[n].childConfig,t[n].panelIndex)}(d[o]),f.showSettingPopup(e,t)},toggleDanmakuStatus:function(e){var t=e.direction,o=(e.fullscreen,b.$el.mplayerFooter.querySelector("#danmaku-controls")),e=b.$el.mplayerFooter.querySelector("#dms-space");o&&(o.style.display="portrait"==t?"none":"flex"),e&&(e.style.display="portrait"==t?"none":"block")},_createDanmakuInput:function(e){var t,o,n,i=y.danmakuComponent||{},l=i.open,r=i.growSize,a=i.position,s=i.buttonText,c=void 0===s?"Send":s,u=i.placeholder,s=void 0===u?"":u,d=i.onSend,u=i.loadIntercept,i=i.style,p=void 0===i?{}:i,r="number"==typeof r&&0<r&&r<=1?r:.65;1==l&&(i=e.querySelector("#progress"),(t=document.createElement("div")).setAttribute("class","danmaku-controls"),t.setAttribute("id","danmaku-controls"),t.setAttribute("control",""),t.style.flexGrow=r,Object.keys(p).forEach(function(e){t.style[e]=p[e]}),(l=document.createElement("div")).setAttribute("class","danmaku-input-wrap"),l.setAttribute("id","danmaku-input-wrap"),l.innerHTML='<input class="dms-input-text" type="text" placeholder="'+s+'"><div class="dms-btn-submit dms-button" style="background-color: '+b.$habit.themeColor+'"><span>'+c+"</span></div>",t.appendChild(l),i.insertBefore(t,i.querySelector("#left-part").nextElementSibling),"function"!=typeof u||(o=u(t))&&i.insertBefore(o,i.querySelector("#left-part").nextElementSibling),(o=document.createElement("div")).setAttribute("id","dms-space"),o.style.flexGrow=1-r,"left"==a?i.insertBefore(o,e.querySelector("#danmaku-controls")["left"==a?"nextElementSibling":";"]):"right"==a&&i.insertBefore(o,e.querySelector("#danmaku-controls")),(n=l.querySelector(".dms-input-text")).addEventListener("keydown",function(e){e.stopPropagation();e=b.$method.getKeyCode(e);27==e&&b.$el.mPlayer.focus(),13==e&&"function"==typeof d&&d(n.value,function(){n.value=""})}),n.addEventListener("blur",function(){m.disabledMousemoveEvent=!1,b.$method.createTimerCloseControl()}),n.addEventListener("focus",function(){m.disabledMousemoveEvent=!0,b.$method.createTimerCloseControl({type:"cancel"})}),l.querySelector(".dms-btn-submit").onclick=function(){"function"==typeof d&&d(n.value,function(){n.value=""})})},_createRolling:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=new function(){return{listeners:[],result:{start:function(){l.isRun=!0,g.startRolling()},stop:function(){l.isRun=!1},destroy:function(){g.remoteRollNode()},onstart:function(e){n.push({type:"start",fun:e})},onfinish:function(e){n.push({type:"finish",fun:e})}},define:{mrpRect:null,rc:null,isRun:!0}}},n=o.listeners,i=o.result,l=o.define,r=b.$el.mPlayer.querySelector("#mplayer-media-wrapper"),o=JSON.parse(JSON.stringify(t)),t=o.id,a=void 0===t?"":t,t=o.scrollamount,s=void 0===t?6:t,t=o.scrolldelay,c=void 0===t?85:t,t=o.loop,u=void 0===t?-1:t,o=o.style,d=void 0===o?{}:o,p=document.createElement("div");p.setAttribute("id","mp-rolling-"+a),p.setAttribute("class","mp-rolling"),Object.keys(d).forEach(function(e){p.style[e]=d[e]});var m=document.createElement("div");m.setAttribute("id","rolling-content-"+a),m.setAttribute("class","rolling-content"),m.innerHTML=e,p.appendChild(m);var g={clearRollingInterval:function(){clearInterval(b._this._global_["_rollTimer_"+a])},remoteRollNode:function(){r.querySelector("#mp-rolling-"+a)&&b.$method.removeNode(r,"#mp-rolling-"+a),g.clearRollingInterval()},getContentRelativeDiff:function(){return Number(m.style.left.replace("px",""))},initRollYayout:function(){m.style.left=l.mrpRect.width+"px",g.startRolling()},startRolling:function(){var e=g.getContentRelativeDiff();b._this._global_["_rollTimer_"+a]&&g.clearRollingInterval(),b._this._global_["_rollTimer_"+a]=setInterval(function(){l.isRun||g.clearRollingInterval(),(e-=s)<=-l.rc.width?(g.clearRollingInterval(),m.style.left=-l.rc.width+"px",g.loopRolling()):m.style.left=e+"px"},c)},loopRolling:function(){-1===u?g.initRollYayout():0<u-1?(u--,setTimeout(function(){g.initRollYayout()},200)):u-1==0&&(g.remoteRollNode(),n.forEach(function(e){"finish"==e.type&&e.fun()}))},changeSetNodesRect:function(){l.mrpRect=p.getBoundingClientRect(),l.rc=m.getBoundingClientRect()},AddListener:function(){var e=new ResizeObserver(function(e){g.changeSetNodesRect()});e.observe(p),i.onfinish(function(){e.disconnect()}),b._this.once("destroy",function(){g.clearRollingInterval()})}};return g.remoteRollNode(),r.appendChild(p),g.changeSetNodesRect(),g.initRollYayout(),setTimeout(function(){g.AddListener(),n.forEach(function(e){"start"==e.type&&e.fun()})},50),i},_addWatermark:function(e){var t=e.image,o=e.scale,l=void 0===o?1:o,e=e.position,r=void 0===e?"top-right":e,a=b.$el.mPlayer.querySelector("#mplayer-media-wrapper");a.querySelector("#mp-logot-box")&&b.$method.removeNode(a,"#mp-logot-box"),function(){var n=document.createElement("div");n.setAttribute("id","mp-logot-box"),n.setAttribute("class","mp-logot-box"),n.innerHTML='<canvas class="mp-logot"></canvas>';var i=new Image;i.src=t,i.onload=function(e){var t=e.path[0].naturalWidth,o=e.path[0].naturalHeight,e=Math.round(t*l),t=Math.round(o*l),o=n.querySelector(".mp-logot");o.setAttribute("width",e),o.setAttribute("height",t);-1!=["top-right","top-left","bottom-left","bottom-right"].indexOf(r)&&o.classList.add("logot-"+r);o=o.getContext("2d");o.mozImageSmoothingEnabled=!0,o.webkitImageSmoothingEnabled=!0,o.msImageSmoothingEnabled=!0,o.imageSmoothingEnabled=!0,o.drawImage(i,0,0,e,t)},a.insertBefore(n,a.querySelector(".video-wrapper")),b.$method.changeLogoAxis()}()},_popupAdvertise:function(e){function o(){l.querySelector("#advertise-wrap")&&b.$method.removeNode(l,"#advertise-wrap")}var e=e||{},n=e.content,i=e.style,l=b.$el.mPlayer?b.$el.mPlayer.querySelector("#mplayer-media-wrapper"):"";return{open:function(){var t,e;l&&(o(),t=document.createElement("div"),e=b.$method.getLangObject().advertise,t.setAttribute("class","advertise-wrap"),t.setAttribute("id","advertise-wrap"),t.innerHTML='<div class="ad-close"><svg t="1654122963259"class="icon ad-icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="5313"width="32"height="32"><path d="M512 451.669333l211.2-211.2 60.330667 60.330667-211.2 211.2 211.2 211.2-60.330667 60.330667-211.2-211.2-211.2 211.2-60.330667-60.330667 211.2-211.2-211.2-211.2L300.8 240.469333z"p-id="5314"fill="#FFFFFF"></path></svg></div><div class="ad-tip">'+e+"</div>",t.addEventListener("click",function(e){e.stopPropagation()}),t.addEventListener("dblclick",function(e){e.stopPropagation()}),t.addEventListener("mouseup",function(e){e.stopPropagation()}),t.addEventListener("dragstart",function(e){e.preventDefault()}),t.appendChild(n instanceof HTMLElement?n:b.$method.createRangeIsDocFragment(n)),"[object Object]"==Object.prototype.toString.call(i)&&Object.keys(i).forEach(function(e){t.style[e]=i[e]}),t.querySelector(".ad-close").addEventListener("click",function(e){e.stopPropagation(),b.$method.removeNode(l,"#advertise-wrap")}),t.querySelector(".ad-close").addEventListener("mouseenter",function(){t.querySelector(".ad-close .ad-icon path").setAttribute("fill",b.$habit.themeColor)}),t.querySelector(".ad-close").addEventListener("mouseleave",function(){t.querySelector(".ad-close .ad-icon path").setAttribute("fill","#FFFFFF")}),l.appendChild(t))},close:function(){l&&o()}}},_screenshotAction:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.width,o=e.height,n=e.quality,i=void 0===n?.92:n,l=e.type,r=void 0===l?"image/png":l,n=e.scale,l=e.watermark,l=void 0===l?{}:l,a=e.onDone,s=e.onFail,c="";switch(r){case"image/jpeg":c=".jpg";break;case"image/webp":c=".webp";break;default:c=".png"}var n=0<n&&n<=1?n:window.devicePixelRatio||1,u=b.$el.videoObject,d=document.createElement("canvas"),p=Math.floor((t||u.videoWidth)*n),m=Math.floor((o||u.videoHeight)*n);d.width=p,d.height=m;var g=d.getContext("2d");g.mozImageSmoothingEnabled=!0,g.webkitImageSmoothingEnabled=!0,g.msImageSmoothingEnabled=!0,g.imageSmoothingEnabled=!0;function f(){var o="";try{o=d.toDataURL(r,i)}catch(e){console.error(e),"function"==typeof s&&s(e)}"function"==typeof a&&a({base64:o,currentTime:u.currentTime,download:function(e){var t=new Date,t=[t.getFullYear(),t.getMonth()+1,t.getDate(),(new Date).valueOf().toString().substr(7,5)];e=e||"screenshot"+t.join("");t=document.createElement("a");t.href=o.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),t.download=e+c;e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}})}g.drawImage(u,0,0,d.width,d.height);var h=new Image;h.crossOrigin="anonymous";var n=l.image,v=l.scale||1,y=l.position||"top-right";n?(h.onerror=function(e){"function"==typeof s&&s(e)},h.onload=function(e){for(var t=e.path[0].naturalWidth,o=e.path[0].naturalHeight,n=Math.round(t*v),e=Math.round(o*v),t=p-n,o=m-e,i=0,l=0,r=0,a=[{type:"top-right",data_x:t-.015*t,data_y:.03*o},{type:"top-left",data_x:.015*t,data_y:.03*o},{type:"bottom-right",data_x:t-.015*t,data_y:o-.03*o},{type:"bottom-left",data_x:.015*t,data_y:o-.03*o}];r<a.length;r++){var s=a[r];if(s.type==y){i=s.data_x,l=s.data_y;break}}g.drawImage(h,i,l,n,e),f()},h.src=n):f()},_addPrompt:function(e,t){e=e||b.$el.videoObject.duration;var o=y.prompt||{},n=o.dotColor,i=void 0===n?"#F8F8FF":n,n=o.hoverShow,o=o.items,o=void 0===o?[]:o,s=b.$el.touchEffective;if(s&&1<e){var c=document.createElement("div");c.setAttribute("class","prompts-container");var l,r=_createForOfIteratorHelper(o);try{for(r.s();!(l=r.n()).done;){var a,u,d,p=l.value,m=p.time,g=p.content,f=p.style;"object"==_typeof(p)&&m<e&&g&&(a=document.createElement("div"),u=m/e*100,a.style.left=u+"%",a.style.backgroundColor=i,d=g instanceof HTMLElement?g.outerHTML:g,a.setAttribute("data-content",d),f&&a.setAttribute("stylesheet",JSON.stringify(f)),a.setAttribute("class","progress-prompt progress-default-scale"),a.setAttribute("id","progress-prompt"),a.addEventListener("mousemove",function(e){h(e)}),a.addEventListener("mouseout",function(e){e=e.currentTarget.parentNode;e.removeChild(e.querySelector(".prompt-content-node"))}),c.appendChild(a))}}catch(e){r.e(e)}finally{r.f()}var h=function(e){var t,o=s.getBoundingClientRect(),n=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),i=c.querySelector(".prompt-content-node");i||((i=document.createElement("div")).setAttribute("class","prompt-content-node"),t={position:"absolute",zIndex:9,fontSize:"15px",textShadow:"0 0 4px rgba(0, 0, 0, 0.75)"},r=e.currentTarget.getAttribute("stylesheet")||"{}",r=JSON.parse(r),Object.assign(t,r),Object.keys(t).forEach(function(e){"fontSize"==e&&b.$data.isFullScreen?i.style[e]="calc(".concat(t[e]," * ").concat(v,")"):i.style[e]=t[e]}),a=e.currentTarget.getAttribute("data-content"),i.innerHTML=a,c.appendChild(i));var l=s.querySelector(".mp-thumbnails"),r=s.querySelector(".mp-tooltip"),a=l instanceof Element?l.getBoundingClientRect():{},l=r instanceof Element?r.getBoundingClientRect():{},r=S.thumbnailStyleAtBottom(),l=a.height||l.height;i.style.bottom=Math.round(r+2)+(l||0)+7+"px";r=i.getBoundingClientRect(),l=e.clientX-o.left-r.width/2,e=o.left-n.left+l,n=n.width-(o.left-n.left+l+r.width);12<=e&&12<=n?i.style.left=l+"px":n<=12&&(i.style.left=o.right-o.left-r.width+"px")};s&&(s.insertBefore(c,s.firstElementChild),!0===n&&(c.style.visibility="hidden"))}},_createSeekLine:function(e){var t;!1!==y.seekLine&&((t=document.createElement("div")).setAttribute("class","progress-seekline progress-default-scale"),t.setAttribute("id","progress-seekline"),t.setAttribute("stylesheet",JSON.stringify({width:"3px",height:"2px"})),e.querySelector("#touch-effective")&&e.querySelector("#touch-effective").appendChild(t))},_showSeekLine:function(e){var t,o,n;!1!==y.seekLine&&(t=(n=b.$el.touchEffective).querySelector(".progress-seekline"),o=n.getBoundingClientRect(),n=t.getBoundingClientRect(),n=e.clientX-o.left-n.width/2,t.style.left=n+"px")},miniWindData:{},miniplayerMoveHandle:function(e,t,o){var n,i,l,r,a,s,c,u,d,p,m;switch(e.type){case"mousedown":d=t.getBoundingClientRect(),p=document.documentElement,m=p.clientWidth,p=p.clientHeight,w.miniWindData.downing=!0,w.miniWindData.startX=e.clientX,w.miniWindData.startY=e.clientY,w.miniWindData.right=m-d.right,w.miniWindData.bottom=p-d.bottom,w.miniWindData.width=d.width,w.miniWindData.height=d.height,w.miniWindData.clientWidth=m,w.miniWindData.clientHeight=p;break;case"mousemove":w.miniWindData.downing&&(w.miniWindData.moveing||(w.miniWindData.moveing=!0),t.classList.add("transition-disable"),c=e.clientX-w.miniWindData.startX,u=e.clientY-w.miniWindData.startY,n=(s=w.miniWindData).right,i=s.bottom,l=s.width,r=s.height,a=s.clientWidth,s=s.clientHeight,u=i-u,0<=(c=n-c)&&c<=a-l&&(t.style.right="".concat(c,"px")),0<u&&u<=s-r&&(t.style.bottom="".concat(u,"px")),b.$el.mPlayer.setAttribute("defaultposition",JSON.stringify({right:c,bottom:u})));break;case"mouseup":2==e.button&&e.stopPropagation(),w.miniWindData.downing=!1,0!=o&&t.classList.remove("transition-disable"),setTimeout(function(){w.miniWindData={}},50);break;case"mouseover":t.querySelector(".scrim-layer").style.backgroundColor="rgba(0,0,0,0.35)";break;case"mouseleave":t.querySelector(".scrim-layer").style.backgroundColor="transparent";break;default:e.type}},miniplayerStyleHandle:function(e){var t,o=this,n=e.show,i=_createForOfIteratorHelper(b.$el.mplayerFooter.querySelector(".progress").childNodes);try{for(i.s();!(t=i.n()).done;){var l=t.value,r=window.getComputedStyle(l).display,a=l.classList;n?"none"==r||a.contains("left-part")||a.contains("progress-container")||l.classList.add("element-hidden"):l.classList.remove("element-hidden")}}catch(e){i.e(e)}finally{i.f()}b.$el.mplayerHeader.querySelector(".buttom-group").classList[n?"add":"remove"]("element-hidden");var s=b.$el.mplayerHeader.querySelector(".miniplayer-close-button");n&&!1===s.exist&&((s=document.createElement("button")).setAttribute("class","player-btn header-control miniplayer-close-button keyboard-input"),s.setAttribute("control",""),s.innerHTML='<svg height="100%" viewBox="0 0 24 24" width="100%"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#fff"></path></svg>',s.onclick=function(){o._switchMiniPlayer(!1)},s.onkeydown=function(e){13==b.$method.getKeyCode(e)&&s.click()},b.$el.mplayerHeader.appendChild(s)),n||b.$method.removeNode(b.$el.mplayerHeader,".miniplayer-close-button")},_switchMiniPlayer:function(e,o){var n=b.$el.mPlayer,i=n.querySelector("#mplayer-media-wrapper"),t=b.$el.videoObject,l=t.videoWidth,r=t.videoHeight;if(!1===e){if(!n.hasAttribute("miniplayer"))return!1;i.style.opacity=0,i.style.bottom=0;var a=JSON.parse(n.getAttribute("defaultstyle")),s=a.width,c=a.height,u=a.keepPlayerLayer,d=a.transition,p=a.transitionDuration;return setTimeout(function(){0!=u&&(n.style.width=s,n.style.height=c),n.removeAttribute("miniplayer"),n.removeAttribute("defaultstyle"),i.classList.remove("mplayer-miniwindow"),i.removeAttribute("style"),b._this.emit("miniplayer-change",{show:!1}),w.miniplayerStyleHandle({show:!1})},d?1e3*p:0),!0}["width","height","bottom","right"].forEach(function(e){var t=o[e];b.$CONSTANT.unitLengthReg.test(t)&&(o[e]=isNaN(Number(t))?t:t+"px")});var m=o||{},t=m.width,a=void 0===t?400:t,d=m.height,p=void 0===d?"auto":d,t=m.bottom,g=void 0===t?50:t,d=m.right,f=void 0===d?50:d,t=m.keepPlayerLayer,h=m.transition,d=m.transitionDuration,v=void 0===d?.35:d,m=m.transitionTiming,y=void 0===m?"ease":m;n.setAttribute("miniplayer",""),n.setAttribute("defaultstyle",JSON.stringify({width:n.style.width,height:n.style.height,keepPlayerLayer:t,transition:h,transitionDuration:v})),0!=t&&(t=window.getComputedStyle(n),n.style.width=t.width,n.style.height=t.height),i.style.width=a,i.style.height="auto"==p?"calc(".concat(r," * ").concat(a," / ").concat(l,")"):p;r=n.getBoundingClientRect();i.classList.add("mplayer-miniwindow");l=document.documentElement,p=l.clientWidth,l=l.clientHeight;i.style.bottom="calc(".concat(l,"px - ").concat(i.style.height," - ").concat(r.top,"px)"),i.style.right="calc(".concat(p,"px - ").concat(r.left,"px - ").concat(a,")");r=i.querySelector(".scrim-layer");return r||((r=document.createElement("div")).setAttribute("class","scrim-layer"),i.insertBefore(r,i.firstElementChild),r.addEventListener("click",a=function(e){["click","dblclick"].includes(e.type)?1==w.miniWindData.moveing&&e.stopPropagation():w.miniplayerMoveHandle(e,i,h)}),r.addEventListener("dblclick",a),r.addEventListener("mousedown",a),r.addEventListener("mousemove",a),r.addEventListener("mouseup",a),i.addEventListener("mouseover",a),i.addEventListener("mouseleave",a)),setTimeout(function(){!1===h&&i.classList.add("transition-disable"),i.style["transition-duration"]="".concat(v,"s"),i.style["transition-timing-function"]=y,i.style.borderRadius="11px",i.style.opacity=1;var e=n.getAttribute("defaultposition")||"{}",t=JSON.parse(e),e=t.bottom,t=t.right;i.style.bottom=e?"".concat(e,"px"):g,i.style.right=t?"".concat(t,"px"):f,b._this.emit("miniplayer-change",{show:!0}),w.miniplayerStyleHandle({show:!0})},20),e}},S={popupInstance:function(){this.createPopupElement=function(){var e=document.createElement("div");return e.setAttribute("class","mp-popup"),e},this.setVisiblePopup=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.togglePopupVisible("ON");var n=b.$data.isFullScreen,i=t.getBoundingClientRect(),l=e.getBoundingClientRect(),r=b.$el.mPlayer.getBoundingClientRect(),a=b.$el.touchEffective instanceof Element?b.$el.touchEffective.getBoundingClientRect():{},n=r.width-i.left+r.left-l.width/2-i.width/2+o*(n?v:1);e.style.right=(12<=n?n:12)+"px";r=r.height-(a.top||i.top-5)+r.top;return e.style.bottom=r+"px",m.popupNodeInfo.triggerButtonRect=t.getBoundingClientRect(),m.popupNodeInfo.popupRect=e.getBoundingClientRect(),e},this.togglePopupVisible=function(e){var t=!!b.$el.mPlayer&&b.$el.mPlayer.querySelector(".mp-popup");t&&(t.classList.add("popup-toggle"),"OFF"==e?(b.$el.mPlayer.focus(),t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},110),b._this._global_.webpagePlugin.showSettingState=!1,b.$method.createTimerCloseControl(),document.removeEventListener("mousemove",S.onDocMousemoveEvent)):(setTimeout(function(){t.style.opacity=1},5),setTimeout(function(){t.classList.remove("popup-toggle")},110),b._this._global_.webpagePlugin.showSettingState=!0,setTimeout(function(){b.$method.createTimerCloseControl({type:"cancel"})},100),document.addEventListener("mousemove",S.onDocMousemoveEvent)))}},onEffectiveOverEvent:function(e){var t=(e=e||{}).type||"";if(!b._this._global_.webpagePlugin.showSettingState){var o=y.prompt,n=void 0===o?{}:o,i=function(e){var t=b.$el.touchEffective.querySelectorAll("#progress-total,#progress-buffered,#progress-play,#progress-prompt,#progress-seekline");if(e){for(var o=0;o<t.length;o++)t[o].classList.add("progress-hover-scale");b.$el.progressBall.classList.add("hover-scale"),b.$el.touchEffective.querySelector(".mp-tooltip").style.display="block",b.$el.touchEffective.querySelector(".mp-thumbnails").style.display="block",b.$el.touchEffective.querySelector(".progress-seekline").style.visibility="visible",!0===n.hoverShow&&(b.$el.touchEffective.querySelector(".prompts-container").style.visibility="visible")}if(!e){for(o=0;o<t.length;o++)t[o].classList.remove("progress-hover-scale");b.$el.progressBall.classList.remove("hover-scale"),b.$el.touchEffective.querySelector(".mp-tooltip").style.display="none",b.$el.touchEffective.querySelector(".mp-thumbnails").style.display="none",b.$el.touchEffective.querySelector(".progress-seekline").style.visibility="hidden",!0===n.hoverShow&&(b.$el.touchEffective.querySelector(".prompts-container").style.visibility="hidden")}};switch(t){case"mouseover":i(!0),S.showTimeTooltip(e),S.showThumbnails(e),w._showSeekLine&&w._showSeekLine(e),b.$el.touchEffective.addEventListener("mousemove",S.onEffectiveOverEvent),b.$el.touchEffective.addEventListener("mouseout",S.onEffectiveOverEvent);break;case"mousemove":i(!0),S.showTimeTooltip(e),S.showThumbnails(e),w._showSeekLine&&w._showSeekLine(e);break;case"mouseout":i(!1),b.$el.touchEffective.removeEventListener("mousemove",S.onEffectiveOverEvent),b.$el.touchEffective.removeEventListener("mouseout",S.onEffectiveOverEvent)}}},addControlTooltip:function(e){for(var t=b.$el.mplayerFooter.querySelectorAll(".footer-control"),o=0;o<t.length;o++)t[o].getAttribute("tooltip")&&(t[o].addEventListener("mouseover",function(e){var t,o,n,i=document.createElement("div");i.setAttribute("class","mp-tooltip"),i.innerText=e.currentTarget.getAttribute("tooltip"),!1!==b.$el.mplayerFooter.querySelector(".mp-tooltip").exist||b.$data.isTouchMove||(b.$el.mplayerFooter.insertBefore(i,b.$el.mplayerFooter.childNodes[0]),t=e.currentTarget.getBoundingClientRect(),o=i.getBoundingClientRect(),n=b.$el.mPlayer.getBoundingClientRect(),e=b.$el.touchEffective instanceof Element?b.$el.touchEffective.getBoundingClientRect():{},o=n.width-t.left+n.left-o.width/2-t.width/2,i.style.right=(16<=o?o:16)+"px",n=n.height-(e.top||t.top-5)+n.top,i.style.bottom=n+"px")}),t[o].addEventListener("mouseout",function(e){b.$method.removeNode(b.$el.mplayerFooter,".mp-tooltip")}))},thumbnailStyleAtBottom:function(){return b.$data.isFullScreen?25.6*v:25.92},showThumbnails:function(e){var t,o,n,i=b.$el.touchEffective.querySelector(".mp-thumbnails"),l=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),r=b.$el.touchEffective.getBoundingClientRect(),a=0,s=0,c=y.thumbnails||{},u=c.preview||[],d=c.tile||[10,10],p=c.scale||[160,90],m=d[0]||10,d=d[1]||10,g=p[0]||160,f=p[1]||90,h=c.async,v=m*d;(0<u.length||"function"==typeof h)&&(o=function(){var e=a%m==0?0:parseInt(a%m)*g,t=a/m<1?0:parseInt(a/m)*f;!function(){!1===i.exist&&((i=document.createElement("div")).setAttribute("class","mp-thumbnails thumbnails-scale"),i.style.outline="2px #FFFFFF solid",i.style.width=g+"px",i.style.height=f+"px",i.style.position="absolute",i.style.pointerEvents="none");var e=b.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]');!1===e.exist?((e=document.createElement("div")).setAttribute("class","preview-image"),e.setAttribute("data-playimage-index",s),e.style.width="100%",e.style.height="100%",i.appendChild(e),b.$el.touchEffective.appendChild(i)):i.appendChild(e),u[s]&&!e.style.backgroundImage&&(e.style.backgroundImage="url("+u[s]+")");for(var t=b.$el.touchEffective.querySelectorAll(".preview-image"),o=0;o<t.length;o++){var n=t[o].getAttribute("data-playimage-index");t[o].style.display=n!=s?"none":"block"}}();var o=i.getBoundingClientRect();b.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]').style.backgroundPosition=-e+"px "+-t+"px";e=S.thumbnailStyleAtBottom();i.style.bottom=Math.round(e)+"px";t=n-o.width/2,e=r.left-l.left+t,o=l.width-(r.left-l.left+t+o.width);12<=e&&12<=o&&(i.style.left=t+"px")},n=e.clientX-r.left,b.$method.computeProgress(n,b.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0),t=parseInt(e/100*b.$data.duration),a=t,s=parseInt(a/v),"function"==typeof h&&(h(e={client:{},put:function(e){e.forEach(function(e){var t=e.index,e=e.src;y.thumbnails.preview||(y.thumbnails.preview=[]),y.thumbnails.preview[t]=e})}}),e.client.receive instanceof Function&&e.client.receive({time:t,thumbnail_image_index:s})),o()}))},showTimeTooltip:function(e){var i=b.$el.touchEffective.getBoundingClientRect(),l=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),r=e.clientX-i.left;b.$method.computeProgress(r,b.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0);var t=e/100*b.$data.duration,o=b.$method.formatCurrentTime(t),n=b.$el.touchEffective.querySelector(".mp-tooltip");!1===n.exist&&((n=document.createElement("div")).setAttribute("class","mp-tooltip"),b.$el.touchEffective.appendChild(n));e=S.thumbnailStyleAtBottom();n.style.bottom=Math.round(e+2)+"px";t=n.getBoundingClientRect();n.innerText=o;e=r-t.width/2,o=i.left-l.left+e,t=l.width-(i.left-l.left+e+t.width);12<=o&&12<=t&&(n.style.left=e+"px")})},addFocusKeyboardHandle:function(){for(var e=b.$el.mPlayer.querySelectorAll(".keyboard-input"),t=0;t<e.length;t++)e[t].addEventListener("keydown",function(e){var t=b.$method.getKeyCode(e),o=e.currentTarget.getAttribute("id");-1!=new Array(13,32).indexOf(t)&&((new S.popupInstance).togglePopupVisible("OFF"),32!=t&&("setting-switch"!=o?"volume-switch"!=o?e.currentTarget.click():g.showVolumePopup(e):f.showSettingPopup(e)))}),e[t].addEventListener("mousedown",function(e){b._this._global_.webpagePlugin.inputMousedownFlag=!0,f.focusToggle("OFF"),b.$method.createTimerCloseControl()}),e[t].addEventListener("focus",function(e){setTimeout(function(){b._this._global_.webpagePlugin.inputMousedownFlag||f.focusToggle("ON"),b._this._global_.webpagePlugin.inputMousedownFlag=!1,S.onMpMousemoveEvent(),document.activeElement.classList.contains("keyboard-input")&&b.$method.createTimerCloseControl({type:"cancel"})},10)}),e[t].addEventListener("blur",function(){b.$el.mPlayer.querySelector(".mplayer-sidebar.open")||b.$method.createTimerCloseControl()})},onMpMousemoveEvent:function(){m.disabledMousemoveEvent||(b.$data.showScreenControls?b._this._global_.webpagePlugin.showSettingState||b.$method.createTimerCloseControl():b.$method.toggleControlsDisplay({type:"showControls"}),b._this._global_.webpagePlugin.forControlsClose=!1)},onMpMouseleaveEvent:function(e){m.disabledMousemoveEvent||(b._this._global_.webpagePlugin.showSettingState||b._this._global_.webpagePlugin.forControlsClose||b.$data.isTouchMove||b.$method.toggleControlsDisplay({type:"hideControls"}),b._this._global_.webpagePlugin.forControlsClose=!0)},onDocMousemoveEvent:function(e){var t=m.popupNodeInfo.popupRect,o=m.popupNodeInfo.triggerButtonRect,n=t.left,i=t.left+t.width,l=t.top,r=t.top+t.height,i=e.clientX>n&&e.clientX<i&&e.clientY>l&&e.clientY<r,l=o.left-15,r=o.left+o.width+15,t=t.bottom-5,o=o.bottom+5,o=e.clientX>l&&e.clientX<r&&e.clientY>t&&e.clientY<o;i||o||!f.isNextReady||(new S.popupInstance).togglePopupVisible("OFF")},setElScale:function(e,t){var o=b.$data.isFullScreen,n={};if(Array.isArray(t)?t.forEach(function(e){n[e]=""}):n=t,e instanceof Element){var i=function(e){return Math.round(e)},l=function(e){return Number(e.replace("px",""))},r=e.getBoundingClientRect(),a=e.getAttribute("stylesheet");try{a=a?JSON.parse(a):{}}catch(e){}var s,c,u,d,p=function(){e.style.lineHeight=o?i((n.lineHeight||r.height)*v)+"px":(n.lineHeight||i(r.height*v))+"px"};for(s in n)switch(s){case"width":d=void 0,o?(d=i((n.width||r.width)*v),e.style.width=(d%2==0?d:d+1)+"px"):e.style.width=n.width?n.width+"px":a.width||i(r.width/v)+"px";break;case"height":u=void 0,o?(u=i((n.height||r.height)*v),e.style.height=(u%2==0?u:u+1)+"px"):e.style.height=n.height?n.height+"px":a.height||i(r.height/v)+"px";break;case"fontSize":c=void 0,c=document.defaultView.getComputedStyle(e,null).fontSize,e.style.fontSize=o?i((n.fontSize||l(c))*v)+"px":n.fontSize?n.fontSize+"px":a.fontSize||i(l(c)/v)+"px";break;case"lineHeight":case"transform":p()}}},toggles:function(){this.pageFull=function(e){function t(){i.contains("page-fullscreen")||(b._this._global_.webpagePlugin.isPagefull=!0,b.$el.mPlayer.classList.add("page-fullscreen"),n[0].style.display="none",n[1].style.display="block",n[0].parentNode.setAttribute("tooltip",b.$method.getLangObject().exitPageScreen),b._this.emit("pagefull-change",{pagefull:!0})),e instanceof Object&&b.$method.changeVideoSize({type:"pagefulll"})}function o(){i.contains("page-fullscreen")&&(b._this._global_.webpagePlugin.isPagefull=!1,b.$el.mPlayer.classList.remove("page-fullscreen"),n[0].style.display="block",n[1].style.display="none",n[0].parentNode.setAttribute("tooltip",b.$method.getLangObject().pageScreen),b._this.emit("pagefull-change",{pagefull:!1})),e instanceof Object&&b.$method.changeVideoSize({type:"pagefulll"})}var n=b.$el.mPlayer.querySelectorAll("._fullpage,._unfullpage"),i=b.$el.mPlayer.classList;"change"==e?o():"initFullFixed"==e?t():((b.$el.mPlayer.classList.contains("page-fullscreen")?o:t)(),b.$data.isFullScreen&&b.$method.fullToggle())},this.timeControls=function(e){var n=b.$el.mPlayer.querySelector("#current-time");e?function e(){var t=new Date,o=t.getHours()<10?"0"+t.getHours():t.getHours(),t=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();n&&(n.innerHTML=o+":"+t,n.style.display="inline-block"),b._this._global_.webpagePlugin.timer_1&&clearInterval(b._this._global_.webpagePlugin.timer_1),b._this._global_.webpagePlugin.timer_1=setTimeout(function(){b.$data.isFullScreen&&b.$data.showScreenControls&&e()},1e3)}():n&&(n.style.display="none")},this.scaleControls=function(l){var r,e,t,o,n,i,a,s,c,u,d=b.$el.mPlayer.classList;l&&d.contains("fullscreen-scaling")||(l||d.contains("fullscreen-scaling"))&&(r=function(e){for(var t=0;t<e.length;t++)for(var o=b.$el.mPlayer.querySelectorAll(e[t].selector),n=0;n<o.length;n++)S.setElScale(o[n],e[t].attr)},function(){r([{selector:"#danmaku-controls",attr:["fontSize"]},{selector:"#danmaku-controls .danmaku-input-wrap",attr:["height"]},{selector:"#danmaku-controls .danmaku-input-wrap .dms-input-text",attr:["fontSize"]},{selector:"#danmaku-controls .danmaku-input-wrap .dms-btn-submit",attr:["width"]}]);var e="number"==typeof(e=(y.danmakuComponent||{}).growSize)&&0<e&&e<=1?e:.65,t=b.$el.mplayerFooter.querySelector("#danmaku-controls"),o=b.$el.mplayerFooter.querySelector("#dms-space"),n=b.$el.mPlayer.querySelectorAll(".mp-rolling"),i=["webkitTransform","transform","msTransform"];l?(t.style.flexGrow=e*v,o.style.flexGrow=(1-e)/v,n.forEach(function(t){i.forEach(function(e){t.style[e]="scale("+v+")"})})):(t.style.flexGrow=e,o.style.flexGrow=1-e,n.forEach(function(t){i.forEach(function(e){t.style[e]="scale(1)"})}))}(),e=y.fullScalingControls||[],r(e),r([{selector:".mplayer-header,.mplayer-footer",attr:["height"]},{selector:".header-control,.footer-control,.mplayer-sidebar",attr:["width","fontSize"]},{selector:"#mplayer-loading .mplayer-loading__circular",attr:{width:40,height:40}},{selector:".mplayer-shortcut",attr:{width:430}},{selector:".mplayer-shortcut .title",attr:{fontSize:16}},{selector:".mplayer-shortcut .close-shortcut-panel",attr:{width:24,height:24}},{selector:".mplayer-shortcut ul",attr:{fontSize:14}},{selector:"#progress-total,#progress-buffered,#progress-play,#progress-prompt,#progress-seekline",attr:{height:2}},{selector:"#progress-prompt,#progress-seekline",attr:["width"]},{selector:"#progress-ball .progress-ball",attr:{width:15,height:15}},{selector:"#mplayer-toast",attr:["fontSize"]},{selector:"#mplayer-footer .spot",attr:["height","width"]}]),l?(t="@-webkit-keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*v+");transform: scale("+1.5*v+");}}@keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*v+");transform: scale("+1.5*v+");}}",o=".mp-tooltip {font-size:"+12*v+"px !important;}",n=".mp-thumbnails.thumbnails-scale {-webkit-transform: scale("+v+");-ms-transform: scale("+v+");transform: scale("+v+");-webkit-transform-origin: left bottom;-ms-transform-origin: left bottom;transform-origin: left bottom;}",i=".toast-scaling{font-size: "+14*v+"px !important;}",a=".mp-keyboard-focus .mp-menuitem:focus {box-shadow: inset 0 0 0 "+2*v+"px rgba(27,127,204,0.8) !important;}.mp-keyboard-focus .keyboard-input:focus {box-shadow: inset 0 0 0 "+2*v+"px rgba(27,127,204,0.8) !important;}",s="",b.$el.mPlayer.querySelector("#progress-container")&&(c=b.$el.mPlayer.querySelector("#progress-container").getBoundingClientRect(),u=b.$el.mPlayer.querySelector("#progress-container #progress-total").getBoundingClientRect(),s=".mplayer-footer .progress .progress-container.upper-position {margin-bottom: -"+(c.height-u.height)/2+"px !important;}"),(u=(c=document.getElementsByTagName("head").item(0)).querySelector("#player-scaling-style"))?b.$method.removeNode(c,"#player-scaling-style"):((u=document.createElement("style")).setAttribute("id","player-scaling-style"),u.setAttribute("type","text/css")),u.innerHTML=t+o+n+i+a+s,c.appendChild(u)):b.$method.removeNode(document.getElementsByTagName("head").item(0),"#player-scaling-style"),l?d.add("fullscreen-scaling"):d.remove("fullscreen-scaling"))}},showHandleIcon:function(e){var t='<svg t="1598581427609" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2856" width="24" height="24"><path d="M267.58370352 186.11160469h162.94419765v651.77679062H267.58370352zM593.47209883 186.11160469h162.94419765v651.77679062h-162.94419765z" p-id="2857" fill="#ffffff"></path></svg>',o='<svg t="1598581671973" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2357" width="24" height="24"><path d="M287.49910545 187.55999756l502.5923252 324.51242209-502.5923252 324.44000244z" p-id="2358" fill="#ffffff"></path></svg>',n='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16579" width="100%" height="100%"><path d="M512 8v237.17647013h237.17647013m148.23529481 266.82352987a59.29411753 59.29411753 0 1 1-59.29411753 59.29411753 59.29411753 59.29411753 0 0 1 59.29411753-59.29411753zM512 245.17647012a326.11764741 326.11764741 0 1 0 326.11764741 326.11764741h118.58823506A444.70588247 444.70588247 0 1 1 512 126.58823506v118.58823507z m-60.77647013 140.17129482l-24.90352987 194.3068237a300.23576494 300.23576494 0 0 1 48.32470617-3.20188247c71.74588247 0 106.72941136 32.61176494 106.72941136 84.34588247a81.79623506 81.79623506 0 0 1-85.68 83.27858766 166.70541136 166.70541136 0 0 1-77.97176494-20.30823507l-13.93411753 46.99058864a191.31247013 191.31247013 0 0 0 93.9811763 22.4131763 137.76988247 137.76988247 0 0 0 146.75294123-137.71058864c0-82.21129383-63.14823506-124.93270617-136.08-124.93270617-11.26588247 0-18.67764741 1.06729383-26.68235259 1.60094123l13.3411763-95.55247012h140.82352987v-51.23011753h-184.70117629z" p-id="16580" fill="#ffffff"></path></svg>',i='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16817" width="100%" height="100%"><path d="M512 1016A444.70588247 444.70588247 0 0 1 67.29411753 571.29411753a59.29411753 59.29411753 0 0 1 118.58823506 0A326.11764741 326.11764741 0 1 0 512 245.17647012V126.58823506a444.70588247 444.70588247 0 0 1 0 889.41176494z m108.50823506-360.53788247a137.76988247 137.76988247 0 0 1-146.75294123 137.71058864 190.42305877 190.42305877 0 0 1-93.9811763-22.4131763l13.63764741-46.99058864a166.70541136 166.70541136 0 0 0 77.97176493 20.30823507 82.03341136 82.03341136 0 0 0 85.97647013-83.27858766c0-51.79341136-35.28-84.34588247-106.72941136-84.34588247a304.23811753 304.23811753 0 0 0-48.62117728 3.20188247l25.2-194.3068237h184.70117728v51.23011753h-140.82352987l-13.3411763 95.55247012c8.00470617-0.53364741 15.41647013-1.60094123 26.68235259-1.60094123 72.93176494 0 136.08 42.72141136 136.08 124.93270617zM512 8v237.17647013H274.82352987z" p-id="16818" fill="#ffffff"></path></svg>',l=b.$el.mPlayer.querySelector(".mp-bezel-text-hide");switch(e){case"mouseclick":b.$data.isPlay?l.querySelector(".mp-bezel-icon").innerHTML=t:l.querySelector(".mp-bezel-icon").innerHTML=o;break;case"progress-forward":l.querySelector(".mp-bezel-icon").innerHTML=n;break;case"progress-back":l.querySelector(".mp-bezel-icon").innerHTML=i;break;case"volume-icon":l.querySelector(".mp-bezel-icon").innerHTML=g.toggleVolumeIcon()}"none"==l.style.display?l.style.display="block":(l.style.display="none",b._this._global_.webpagePlugin.handleIconTimer_1||(b._this._global_.webpagePlugin.handleIconTimer_1=setTimeout(function(){b._this._global_.webpagePlugin.handleIconTimer_1=!1,l.style.display="block"},15))),b._this._global_.webpagePlugin.handleIconTimer_2&&window.clearTimeout(b._this._global_.webpagePlugin.handleIconTimer_2),b._this._global_.webpagePlugin.handleIconTimer_2=setTimeout(function(){l.style.display="none"},400)},buildBasePanel:function(e){var t=e.querySelector("#right-part"),o=document.createElement("button");o.setAttribute("class","player-btn keyboard-input footer-control"),o.setAttribute("id","volume-switch"),o.setAttribute("control",""),o.innerHTML=g.toggleVolumeIcon(),t.insertBefore(o,t.childNodes[t.childNodes.length-1]),o.addEventListener("mouseover",g.showVolumePopup),o.addEventListener("click",g.onClickEvent),!document.pictureInPictureEnabled||e.querySelector("video").disablePictureInPicture||((n=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control picture-in-picture"),n.setAttribute("id","picture-in-picture"),n.setAttribute("tooltip",b.$method.getLangObject().pictureInPicture),n.setAttribute("control",""),n.innerHTML=s.togglePictureIcon(),t.insertBefore(n,t.childNodes[t.childNodes.length-1]),n.addEventListener("click",s.onPictureInPicture)),a("statics");var n=(b.option.subtitle||{}).tracks;(0<d.settingConfigs.length||Array.isArray(n)&&0<n.length)&&((i=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control"),i.setAttribute("id","setting-switch"),i.setAttribute("control",""),i.innerHTML='<svg t="1607605827678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2386"><path d="M857.9375 512c0-49.125 30.84375-90.75 74.0625-107.34375-10.3125-40.5-26.25-78.65625-47.0625-113.71875C842.5625 309.78125 791.375 302.09375 756.6875 267.3125c-34.6875-34.6875-42.375-85.96875-23.53125-128.25C698 118.25 659.84375 102.3125 619.34375 92c-16.6875 43.21875-58.3125 74.0625-107.34375 74.0625-49.125 0-90.75-30.84375-107.34375-74.0625-40.5 10.3125-78.65625 26.25-113.71875 47.0625 18.84375 42.375 11.15625 93.5625-23.53125 128.25-34.6875 34.6875-85.96875 42.375-128.25 23.625C118.25 326 102.3125 364.15625 92 404.65625c43.21875 16.6875 74.0625 58.3125 74.0625 107.34375 0 49.125-30.84375 90.75-74.0625 107.34375 10.3125 40.5 26.25 78.65625 47.0625 113.71875C181.4375 714.21875 232.625 721.90625 267.3125 756.6875c34.6875 34.6875 42.375 85.96875 23.53125 128.25C326 905.75 364.15625 921.6875 404.65625 932c16.6875-43.21875 58.3125-74.0625 107.34375-74.0625 49.125 0 90.75 30.84375 107.34375 74.0625 40.5-10.3125 78.65625-26.25 113.71875-47.0625-18.84375-42.375-11.15625-93.5625 23.53125-128.25 34.6875-34.6875 85.96875-42.375 128.25-23.625C905.75 698 921.6875 659.84375 932 619.34375c-43.21875-16.59375-74.0625-58.21875-74.0625-107.34375zM512 627.3125c-63.65625 0-115.3125-51.65625-115.3125-115.3125s51.65625-115.3125 115.3125-115.3125 115.3125 51.65625 115.3125 115.3125-51.65625 115.3125-115.3125 115.3125z" p-id="2387" fill="#ffffff"></path></svg>',t.insertBefore(i,t.childNodes[t.childNodes.length-1]),i.addEventListener("mouseover",function(e){d.name="settingConfigs",f.showSettingPopup(e)}));var i=document.createElement("button");i.setAttribute("class","player-btn keyboard-input footer-control"),i.setAttribute("id","pagefull-switch"),i.setAttribute("tooltip",b.$method.getLangObject().pageScreen),i.setAttribute("control",""),i.innerHTML='<div class="_fullpage"controls="full-page"><svg t="1607605504727"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2356"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2357"fill="#ffffff"></path><path d="M238.93333333 496.70826667c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667v-136.53333333c0-21.84533333 16.384-43.69066667 43.69066666-43.69066667h136.53333334c21.84533333 0 43.69066667 16.384 43.69066666 43.69066667s-21.84533333 38.22933333-43.69066666 38.22933333H282.624v98.304c0 21.84533333-21.84533333 43.69066667-43.69066667 43.69066667zM785.06666667 687.85493333h-136.53333334c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666s16.384-43.69066667 43.69066666-43.69066667h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s43.69066667 16.384 43.69066666 43.69066667v141.99466667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066666 43.69066666z"p-id="2358"fill="#ffffff"></path></svg></div><div class="_unfullpage"controls="unfull-page"style="display: none;"><svg t="1607605550628"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2519"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2520"fill="#ffffff"></path><path d="M375.46666667 496.70826667H238.93333333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667s21.84533333-38.22933333 43.69066666-38.22933333h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s38.22933333 21.84533333 38.22933333 43.69066667v136.53333333c0 21.84533333-16.384 43.69066667-38.22933333 43.69066667zM648.53333333 687.85493333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666v-136.53333334c0-21.84533333 16.384-43.69066667 43.69066666-43.69066666H785.06666667c21.84533333 0 43.69066667 16.384 43.69066666 43.69066666s-16.384 43.69066667-43.69066666 43.69066667h-92.84266667v92.84266667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066667 43.69066666z"p-id="2521"fill="#ffffff"></path></svg></div>',t.insertBefore(i,t.childNodes[t.childNodes.length-1]),i.addEventListener("click",(new S.toggles).pageFull),b.$method.removeNode(e,"#back-button #back-icon-svg");i=document.createElement("button");b.$method.setElementStyle(i,{fontSize:"18px",color:"#FFFFFF",width:"auto"}),i.setAttribute("class","player-btn header-control"),i.setAttribute("id","current-time"),i.setAttribute("control",""),i.innerHTML='<div id="" style="display: none;"></div>',e.querySelector("#buttom-group").appendChild(i);e.appendChild(b.$method.createRangeIsDocFragment('<div style="display: none;"class="mp-bezel-text-hide"><div class="mp-bezel"><div class="mp-bezel-icon"></div></div></div>'));i=document.createElement("div");i.setAttribute("class","ctxmenu-wrapper"),i.setAttribute("id","ctxmenu-wrapper"),i.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(i);var l=document.createElement("div");l.setAttribute("class","mplayer-shortcut"),l.setAttribute("id","mplayer-shortcut");i=b.$method.getLangObject().shortcutsPanel;return l.innerHTML='<p class="title">'+i.title+'</p><div class="close-shortcut-panel"><svg height="100%" viewBox="0 0 24 24" width="100%"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#fff"></path></svg></div><ul><li><label>'+i.space+"：</label><span>"+i.spaceAction+"</span></li><li><label>Esc：</label><span>"+i.esc+"</span></li></ul><ul><li><label>↑：</label><span>"+i.up+"</span></li><li><label>↓：</label><span>"+i.down+"</span></li></ul><ul><li><label>→：</label><span>"+i.right+"</span></li><li><label>←：</label><span>"+i.left+"</span></li></ul>",l.addEventListener("click",function(e){e.stopPropagation()}),l.addEventListener("dblclick",function(e){e.stopPropagation()}),l.addEventListener("mouseup",function(e){e.stopPropagation()}),l.querySelector(".close-shortcut-panel").addEventListener("click",function(){l.style.display="none"}),e.appendChild(l),w._createDanmakuInput&&w._createDanmakuInput(e),w._createSeekLine&&w._createSeekLine(e),e},initConfigControls:function(e){1!=b.option.live&&((l=document.createElement("button")).setAttribute("class","player-btn footer-control keyboard-input"),l.setAttribute("style","color: white;display: flex;align-items: center;width: auto;"),l.innerHTML='<div class="progress-begin" id="progress-begin"style="width: initial;margin-right: 5px;font-size: inherit;">'+b.$method.getLangObject().begin+'</div><div class="time-symbol">/</div><div class="progress-long" id="progress-long" style="color: #dddddd;width: initial;margin-left: 5px;font-size: inherit;">'+b.$method.getLangObject().end+"</div>",b.$method.setElementStyle(l,{color:"#FFFFFF",display:"flex",width:"auto"}),b.$method.removeNode(e,"#progress-begin"),b.$method.removeNode(e,"#progress-long"),e.querySelector("#left-part").appendChild(l)),e.querySelector("#progress-ball")&&e.querySelector("#progress-ball").classList.add("default-scale"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.height="15px"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.width="15px"),e.querySelector("#progress-container")&&e.querySelector("#progress-container").setAttribute("style","left: 12px;right: 12px;"),e.querySelector("#touch-effective")&&(e.querySelector("#touch-effective").style.margin="0");for(var t=e.querySelectorAll("#progress-total,#progress-buffered,#progress-play"),o=0;o<t.length;o++)t[o]&&t[o].classList.add("progress-default-scale");var n=g.getStorageVolume(),i=n.expiration,l=n.muted,n=n.volume;return"number"==typeof i&&i>(new Date).getTime()?("boolean"==typeof l&&(e.querySelector("video").muted=l),"number"==typeof n&&(e.querySelector("video").volume=0<n&&n<100?Number.parseInt(n)/100:1)):(n=b.option.volume,g.setStorageVolume(0<=n&&n<=1?100*n:100)),!0===b.option.muted&&(e.querySelector("video").muted=!0,g.setStorageVolume(null,!0)),e=S.buildBasePanel(e)},onDurationChange:function(e){w._addPrompt&&w._addPrompt(e.duration,"durationChangeSymbol")},onFullscreenChange:function(e){b._this._global_.isReady&&(w.toggleDanmakuStatus&&w.toggleDanmakuStatus(e),e.fullscreen?((new S.toggles).pageFull("change"),(new S.toggles).timeControls(!0),(new S.toggles).scaleControls(!0)):((new S.toggles).scaleControls(!1),(new S.toggles).timeControls(!1),(new S.popupInstance).togglePopupVisible("OFF")))},onControlsToggle:function(e){e.show||(new S.popupInstance).togglePopupVisible("OFF"),b.$data.isFullScreen&&(new S.toggles).timeControls(e.show);function t(e){b.$el.mPlayer.style.cursor=e}b._this._global_.webpagePlugin.timer_2&&clearTimeout(b._this._global_.webpagePlugin.timer_2),e.show||!b.$data.isFullScreen&&!b._this._global_.webpagePlugin.isPagefull?t("default"):b._this._global_.webpagePlugin.timer_2=setTimeout(function(){b.$data.isShowRightSidebar||t("none")},1e3)},onReady:function(){var e;"function"==typeof b.$el&&(e=new b.$el,b.$el=e),!0===b.option.initFullFixed&&(new S.toggles).pageFull("initFullFixed"),S.addFocusKeyboardHandle(),S.addControlTooltip(),S.toggleEventListenerGlobal("add","playerReady"),t.addProto(),w._addPrompt&&w._addPrompt("","readyChangeSymbol")},onDestroy:function(){S.toggleEventListenerGlobal("remove","playerDestroy")},onError:function(){S.toggleEventListenerGlobal("remove","playerError")},onAction:function(e){var t="add"==e?"on":"off";b._this[t]("duration-change",S.onDurationChange),b._this[t]("fullscreen-change",S.onFullscreenChange),b._this[t]("controls-toggle",S.onControlsToggle),b._this[t]("ready",S.onReady,"MASTER"),b._this[t]("error",S.onError),setTimeout(function(){b._this[t]("destroy",S.onDestroy)})},vaks:function(){return t.dekey="209223533453495",b.$method.dc(o)===t.dekey},toggleEventListenerGlobal:function(e,t){var o="add"==e?"addEventListener":"removeEventListener";b._this._global_.webpagePlugin.eventStatus=o;b.$el.touchEffective instanceof Element&&b.$el.touchEffective[o]("mouseover",S.onEffectiveOverEvent),b.$el.mPlayer&&b.$el.mPlayer[o]("mousemove",S.onMpMousemoveEvent),b.$el.mPlayer&&!0===y.leaveHiddenControls&&b.$el.mPlayer[o]("mouseleave",S.onMpMouseleaveEvent),b.$el.mPlayer&&b.$el.mPlayer[o]("keydown",n.onDocKeydown),b.$el.mPlayer&&b.$el.mPlayer[o]("mouseup",c.createCtxmenu),b.$el.mPlayer&&b.$el.mPlayer[o]("contextmenu",c.onContextmenuEvent),"playerDestroy"==t&&S.onAction("remove")}};this.addProto=function(){b._this.popupAdvertise=w._popupAdvertise,b._this.addWatermark=w._addWatermark,b._this.createRolling=w._createRolling,b._this.screenshot=w._screenshotAction,b._this.switchMiniPlayer=w._switchMiniPlayer,b._this.createSettingPopup=w._createSettingPopup},this.interface=function(t){this._onAgentMpTap=function(e){if("click"==e){if(S.vaks())return b.$method.onPlayTap({type:"dblscreen"}),S.showHandleIcon("mouseclick"),void("removeEventListener"==b._this._global_.webpagePlugin.eventStatus&&this._addEvent());b.$method.toggleControlsDisplay(t),b.$el.mPlayer.querySelector(".mplayer-sidebar.open")&&b.$method.toggleControlsDisplay(t)}"dbclick"!=e||S.vaks()&&b.$el.mPlayer.hasAttribute("miniplayer")||(S.vaks()?b.$method.fullToggle(t):b.$method.onPlayTap({type:"dblscreen"}))},this._removeEvent=function(){S.vaks()&&S.toggleEventListenerGlobal("remove","activeRemove")},this._addEvent=function(){S.vaks()&&S.toggleEventListenerGlobal("add")}},this.appendTemplate=function(e,t){b={},b=t,console.info("loading mui player desktop plugin...");return S.vaks()?(S.onAction("add"),e=S.initConfigControls(e)):b._this.on("ready",function(){r.rst({message:b.$method.dc("02803002T02P03702T00W02R03303202U02X02V03903602T00W03802W02T00W02R03303603602T02R03800W02Z02T03D00X"),duration:5e3,style:{backgroundColor:"rgba(237,64,20,.8)"}})},"MASTER"),e},this.name="MuiPlayerDesktopPlugin"}});